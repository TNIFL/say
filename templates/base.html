<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>{% block title %}Lexinoa{% endblock %} - AI ë¬¸ì¥ êµì •</title>
  <meta name="description" content="{% block description %}AIê°€ ì´ë©”ì¼, ë³´ê³ ì„œ, ë©”ì‹œì§€ë¥¼ ìƒí™©ì— ë§ëŠ” ìì—°ìŠ¤ëŸ¬ìš´ ë¬¸ì¥ìœ¼ë¡œ êµì •í•©ë‹ˆë‹¤.{% endblock %}">
  <meta name="color-scheme" content="dark light">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/mainpage.css') }}">
  {% block head_extra %}{% endblock %}
</head>
<body>
  <div class="main">
    <header class="site-header">
      <div class="inner">
        <a class="brand" href="/">
          <span class="brand-mark" aria-hidden="true">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 5.5C4 4.12 5.34 3 7 3h10c1.66 0 3 1.12 3 2.5v7c0 1.38-1.34 2.5-3 2.5H11l-3.6 3.1c-.52.45-1.4.09-1.4-.55V15H7c-1.66 0-3-1.12-3-2.5v-7Z"></path></svg>
          </span>
          <span class="brand-title">Lexinoa</span>
        </a>

        <div class="header-actions" style="display:flex; align-items:center; gap:8px; min-width:0;">
          {% if g.is_admin %}
          <a class="btn ghost" href="{{ url_for('admin.admin_analytics_page') }}">ì–´ë“œë¯¼ ë¶„ì„</a>
          {% endif %}
          <button id="themeToggle" class="theme-toggle">ğŸŒ™ ë‹¤í¬/ë¼ì´íŠ¸</button>
          {# <a class="btn ghost" href="{{ url_for('summarize.summarize_page') }}">ìš”ì•½Â·ì •ë¦¬</a> #}
          <a class="btn ghost" href="{{ url_for('feedback.feedback') }}">í”¼ë“œë°±</a>
          <a class="btn ghost" href="{{ url_for('subscribe.subscribe_page') }}">êµ¬ë…</a>

          {% if session.get('user') %}
            <a class="btn ghost" href="{{ url_for('history.user_history') }}">ê¸°ë¡ë³´ê¸°</a>
            <a class="btn ghost" href="{{ url_for('mypage_overview') if false else '/mypage' }}">ë§ˆì´í˜ì´ì§€</a>
            <span class="small" style="max-width:160px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; opacity:.8;" title="{{ session.get('user').user_id }}">
              {{ session.get('user').user_id }}
            </span>
            <a class="btn ghost" href="{{ url_for('auth.logout') }}">ë¡œê·¸ì•„ì›ƒ</a>
          {% else %}
            <a class="btn ghost" href="{{ url_for('auth.login_page') }}">ë¡œê·¸ì¸</a>
          {% endif %}
        </div>
      </div>
    </header>

    {% block content %}{% endblock %}
  </div>

  <footer style="margin:24px auto; max-width:1100px; padding:0 16px; opacity:.85;">
    <div style="border-top:1px solid var(--border); padding-top:12px; display:flex; gap:12px; flex-wrap:wrap; justify-content:flex-end;">
      <a href="/terms" class="small" style="text-decoration:none; color:var(--muted);">ì´ìš©ì•½ê´€</a>
      <span class="small" style="color:var(--muted);">Â·</span>
      <a href="/privacy" class="small" style="text-decoration:none; color:var(--muted);">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>
      <span class="small" style="color:var(--muted);">Â·</span>
      <a href="/disclaimer" class="small" style="text-decoration:none; color:var(--muted);">ë©´ì±… ê³ ì§€</a>
    </div>
  </footer>

  {# ê³µí†µ JS íŒŒì¼ë“¤ #}
  <script src="{{ url_for('static', filename='js/theme-toggle.js') }}" defer></script>
  
  {# í˜ì´ì§€ë³„ ì¶”ê°€ ìŠ¤í¬ë¦½íŠ¸ #}
  {% block scripts %}{% endblock %}
</body>
</html>